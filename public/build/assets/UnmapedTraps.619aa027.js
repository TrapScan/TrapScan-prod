import{A as C}from"./AdminLayout.28d54cb0.js";import{S as R,P as q,t as j,m as Q,p as S}from"./pickBy.f2ac900d.js";import{u as N,r as l,o as n,c as f,w as a,a as e,d as r,b as c,f as h,F as b,g as z,h as g,t as p}from"./app.3ce61da7.js";import{_ as A}from"./_plugin-vue_export-helper.cdc0426e.js";import{E as B}from"./index.ee154714.js";const T={name:"UnmapedTraps",props:{filters:Object,qrs:Object,traps:Object},components:{AdminLayout:C,SearchFilter:R,Pagination:q},data(){return{dialogVisible:!1,form:{search:this.filters.search},newQR:N({nz_id:null,qr_id:null,type:null})}},watch:{form:{deep:!0,handler:j(function(){this.$inertia.get(route("admin.unmapped_traps"),S(this.form),{preserveState:!0})},150)}},methods:{reset(){this.form=Q(this.form,()=>null)},submit(){this.newQR.post(route("admin.map_trap"),{preserveScroll:!0,preserveState:!0,onSuccess:()=>{B({message:"Congrats, trap mapped.",type:"success"}),this.newQR.qr_id=null,this.newQR.nz_id=null,this.dialogVisible=!1}})},open(_){this.newQR.nz_id=_,this.dialogVisible=!0}}},U={class:"flex items-center justify-between mb-6 mx-8 mt-8"},F={class:"mx-8 bg-white dark:bg-mirage-500 rounded-md shadow overflow-x-auto"},L={class:"w-full whitespace-nowrap"},E=e("tr",{class:"text-left font-bold"},[e("th",{class:"pb-4 pt-6 px-6"},"Project"),e("th",{class:"pb-4 pt-6 px-6"},"Trap Name"),e("th",{class:"pb-4 pt-6 px-6"},"NZ ID"),e("th",{class:"pb-4 pt-6 px-6 text-center"},"Actions")],-1),O={class:"border-t"},P={class:"flex items-center px-6 py-4 focus:text-indigo-500"},D={class:"border-t"},I={class:"flex items-center px-6 py-4"},M={class:"border-t"},Z={class:"flex items-center px-6 py-4"},G={class:"border-t"},H={class:"flex w-full justify-center"},J=["onClick"],K={key:0},W=e("td",{class:"px-6 py-4 border-t",colspan:"4"},"No found.",-1),X=[W],Y={class:"flex justify-center"},$={class:"dialog-footer"},ee=g("Cancel"),te=g("Confirm");function se(_,s,i,oe,o,d){const x=l("search-filter"),w=l("pagination"),y=l("el-option"),V=l("el-select"),u=l("el-button"),k=l("el-dialog"),v=l("AdminLayout");return n(),f(v,null,{default:a(()=>[e("div",U,[r(x,{modelValue:o.form.search,"onUpdate:modelValue":s[0]||(s[0]=t=>o.form.search=t),class:"mr-4 w-full max-w-md",onReset:d.reset},null,8,["modelValue","onReset"])]),e("div",F,[e("table",L,[E,(n(!0),c(b,null,h(i.traps.data,t=>{var m;return n(),c("tr",{key:t.id,class:"hover:bg-gray-100 dark:hover:bg-mirage-400 focus-within:bg-gray-100"},[e("td",O,[e("span",P,p((m=t.project)==null?void 0:m.name),1)]),e("td",D,[e("span",I,p(t.name),1)]),e("td",M,[e("span",Z,p(t.nz_trap_id),1)]),e("td",G,[e("div",H,[e("button",{onClick:le=>d.open(t.nz_trap_id),class:"uppercase p-3 rounded-full text-white font-bold bg-blue-500 hover:bg-blue-800"},"Map trap",8,J)])])])}),128)),i.traps.data.length===0?(n(),c("tr",K,X)):z("",!0)])]),r(w,{class:"mt-6",links:i.traps.links},null,8,["links"]),r(k,{modelValue:o.dialogVisible,"onUpdate:modelValue":s[3]||(s[3]=t=>o.dialogVisible=t),title:"Install QR for Trap",width:"20%"},{footer:a(()=>[e("span",$,[r(u,{onClick:s[2]||(s[2]=t=>o.dialogVisible=!1)},{default:a(()=>[ee]),_:1}),r(u,{type:"primary",onClick:d.submit},{default:a(()=>[te]),_:1},8,["onClick"])])]),default:a(()=>[e("div",Y,[r(V,{modelValue:o.newQR.qr_id,"onUpdate:modelValue":s[1]||(s[1]=t=>o.newQR.qr_id=t),filterable:"",placeholder:"Select",class:"w-full"},{default:a(()=>[(n(!0),c(b,null,h(i.qrs,t=>(n(),f(y,{key:t.qr_code,label:t.qr_code,value:t.qr_code},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])])]),_:1},8,["modelValue"])]),_:1})}const de=A(T,[["render",se]]);export{de as default};
//# sourceMappingURL=UnmapedTraps.619aa027.js.map
