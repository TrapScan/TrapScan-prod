import{A as U}from"./AdminLayout.28d54cb0.js";import{S as D,P,t as I,m as N,p as S}from"./pickBy.f2ac900d.js";import{u as w,r as f,o as i,c as A,w as d,a as e,d as c,b as u,f as m,F as y,g as E,h as g,t as p,E as _,R as b}from"./app.3ce61da7.js";import{_ as F}from"./_plugin-vue_export-helper.cdc0426e.js";const B={name:"Users",props:{filters:Object,users:Object,projects:Object},components:{AdminLayout:U,SearchFilter:D,Pagination:P},data(){return{dialogVisible:!1,innerVisible:!1,form:{search:this.filters.search},updateUser:w({projectId:null,userId:null}),updateUserSettings:w({projectId:null,userId:null,value:null,key:null}),projectData:null}},watch:{form:{deep:!0,handler:I(function(){this.$inertia.get(route("admin.users"),S(this.form),{preserveState:!0})},150)}},methods:{reset(){this.form=N(this.form,()=>null)},open(l){this.projectData=l,this.dialogVisible=!0},removeFromPr(l,s){this.updateUser.userId=s,this.updateUser.projectId=l,this.updateUser.post(route("admin.remove_from_pr"))},addToPr(l,s){this.updateUser.userId=s,this.updateUser.projectId=l,this.updateUser.post(route("admin.add_to_pr"))},updateCoordinator(l,s,a,x){this.updateUserSettings.userId=s,this.updateUserSettings.projectId=l,this.updateUserSettings.value=x,this.updateUserSettings.key=a,this.updateUserSettings.put(route("admin.update_user_pr_settingsr"))}}},L={class:"flex items-center justify-between mb-6 mx-8 mt-8"},T={class:"mx-8 bg-white dark:bg-mirage-500 rounded-md shadow overflow-x-auto"},O={class:"w-full whitespace-nowrap"},R=e("tr",{class:"text-left font-bold"},[e("th",{class:"pb-4 pt-6 px-6"},"Name"),e("th",{class:"pb-4 pt-6 px-6"},"Email"),e("th",{class:"pb-4 pt-6 px-6"},"Created"),e("th",{class:"pb-4 pt-6 px-6"},"Projects"),e("th",{class:"pb-4 pt-6 px-6 text-center"},"Actions")],-1),M={class:"border-t"},q={class:"flex items-center px-6 py-4 focus:text-indigo-500"},z={class:"border-t"},G={class:"flex items-center px-6 py-4"},H={class:"border-t"},J={class:"flex items-center px-6 py-4"},K={class:"border-t"},Q={class:"flex items-center px-6 py-4"},W={class:"border-t"},X={class:"flex w-full justify-center"},Y=["onClick"],Z={key:0},$=e("td",{class:"px-6 py-4 border-t",colspan:"4"},"No found.",-1),ee=[$],te={class:"w-full whitespace-nowrap"},se=e("tr",{class:"text-left font-bold"},[e("th",{class:"pb-4 pt-6 px-6"},"Project"),e("th",{class:"pb-4 pt-6 px-6"},"Coordinator"),e("th",{class:"pb-4 pt-6 px-6"},"Notify Catches"),e("th",{class:"pb-4 pt-6 px-6"},"Notify Inspections"),e("th",{class:"pb-4 pt-6 px-6"},"Notify Problems"),e("th",{class:"pb-4 pt-6 px-6 text-center"},"Actions")],-1),oe={class:"border-t"},re={class:"flex items-center px-6 py-4 focus:text-indigo-500"},ae={class:"border-t"},le={class:"flex items-center px-6 py-4"},ne=["for"],ie=["onChange","onUpdate:modelValue","id"],de=e("div",{class:"w-11 h-6 bg-gray-300 rounded-full peer peer-focus:ring-4 peer-focus:ring-blue-300 dark:peer-focus:ring-blue-800 dark:bg-gray-700 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-0.5 after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all dark:border-gray-600 peer-checked:bg-blue-600"},null,-1),ce={class:"border-t"},ue={class:"flex items-center px-6 py-4"},pe=["for"],fe=["onChange","onUpdate:modelValue","id"],he=e("div",{class:"w-11 h-6 bg-gray-300 rounded-full peer peer-focus:ring-4 peer-focus:ring-blue-300 dark:peer-focus:ring-blue-800 dark:bg-gray-700 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-0.5 after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all dark:border-gray-600 peer-checked:bg-blue-600"},null,-1),_e={class:"border-t"},be={class:"flex items-center px-6 py-4"},ge=["for"],me=["onChange","onUpdate:modelValue","id"],ye=e("div",{class:"w-11 h-6 bg-gray-300 rounded-full peer peer-focus:ring-4 peer-focus:ring-blue-300 dark:peer-focus:ring-blue-800 dark:bg-gray-700 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-0.5 after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all dark:border-gray-600 peer-checked:bg-blue-600"},null,-1),xe={class:"border-t"},ke={class:"flex items-center px-6 py-4"},ve=["for"],we=["onChange","onUpdate:modelValue","id"],je=e("div",{class:"w-11 h-6 bg-gray-300 rounded-full peer peer-focus:ring-4 peer-focus:ring-blue-300 dark:peer-focus:ring-blue-800 dark:bg-gray-700 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-0.5 after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all dark:border-gray-600 peer-checked:bg-blue-600"},null,-1),Ve={class:"border-t"},Ce={class:"flex w-full justify-center"},Ue=g("DELETE"),De={class:"w-full whitespace-nowrap"},Pe=e("tr",{class:"text-left font-bold"},[e("th",{class:"pb-4 pt-6 px-6 w-10/12"},"Project Name"),e("th",{class:"pb-4 pt-6 px-6 text-center w-2/12"},"Actions")],-1),Ie={class:"border-t w-10/12"},Ne={class:"flex items-center px-6 py-4 focus:text-indigo-500"},Se={class:"border-t w-2/12"},Ae={class:"flex w-full justify-center"},Ee=g("Add"),Fe={class:"dialog-footer"},Be=g("Cancel"),Le=g("Add Projects");function Te(l,s,a,x,o,n){const j=f("search-filter"),V=f("pagination"),h=f("el-button"),k=f("el-dialog"),C=f("AdminLayout");return i(),A(C,null,{default:d(()=>{var v;return[e("div",L,[c(j,{modelValue:o.form.search,"onUpdate:modelValue":s[0]||(s[0]=t=>o.form.search=t),class:"mr-4 w-full max-w-md",onReset:n.reset},null,8,["modelValue","onReset"])]),e("div",T,[e("table",O,[R,(i(!0),u(y,null,m(a.users.data,(t,r)=>(i(),u("tr",{key:t.id,class:"hover:bg-gray-100 dark:hover:bg-mirage-400 focus-within:bg-gray-100"},[e("td",M,[e("span",q,p(t.name),1)]),e("td",z,[e("span",G,p(t.email),1)]),e("td",H,[e("span",J,p(t.created_at),1)]),e("td",K,[e("span",Q,p(t.projects_all.length),1)]),e("td",W,[e("div",X,[e("button",{onClick:Oe=>n.open(r),class:"uppercase p-2 mr-1 rounded-full text-sm text-white font-bold bg-blue-500 hover:bg-blue-800"},"Edit Projects",8,Y)])])]))),128)),a.users.data.length===0?(i(),u("tr",Z,ee)):E("",!0)])]),c(V,{class:"mt-6",links:a.users.links},null,8,["links"]),c(k,{width:"70%",modelValue:o.dialogVisible,"onUpdate:modelValue":s[4]||(s[4]=t=>o.dialogVisible=t),title:"Edit "+((v=o.projectData)==null?void 0:v.name)},{default:d(()=>[e("table",te,[se,(i(!0),u(y,null,m(a.users.data[o.projectData].projects_all,t=>(i(),u("tr",{key:t.id,class:"hover:bg-gray-100 dark:hover:bg-mirage-400 focus-within:bg-gray-100"},[e("td",oe,[e("span",re,p(t.name),1)]),e("td",ae,[e("span",le,[e("label",{for:"checked-toggle-1-"+t.id,class:"inline-flex relative items-center cursor-pointer"},[_(e("input",{onChange:r=>n.updateCoordinator(t.id,a.users.data[o.projectData].id,"coordinator",t.pivot.coordinator),type:"checkbox","onUpdate:modelValue":r=>t.pivot.coordinator=r,id:"checked-toggle-1-"+t.id,class:"sr-only peer"},null,40,ie),[[b,t.pivot.coordinator]]),de],8,ne)])]),e("td",ce,[e("span",ue,[e("label",{for:"checked-toggle-2-"+t.id,class:"inline-flex relative items-center cursor-pointer"},[_(e("input",{onChange:r=>n.updateCoordinator(t.id,a.users.data[o.projectData].id,"notify_catches",t.pivot.notify_catches),type:"checkbox","onUpdate:modelValue":r=>t.pivot.notify_catches=r,id:"checked-toggle-2-"+t.id,class:"sr-only peer"},null,40,fe),[[b,t.pivot.notify_catches]]),he],8,pe)])]),e("td",_e,[e("span",be,[e("label",{for:"checked-toggle-3-"+t.id,class:"inline-flex relative items-center cursor-pointer"},[_(e("input",{onChange:r=>n.updateCoordinator(t.id,a.users.data[o.projectData].id,"notify_inspections",t.pivot.notify_inspections),type:"checkbox","onUpdate:modelValue":r=>t.pivot.notify_inspections=r,id:"checked-toggle-3-"+t.id,class:"sr-only peer"},null,40,me),[[b,t.pivot.notify_inspections]]),ye],8,ge)])]),e("td",xe,[e("span",ke,[e("label",{for:"checked-toggle-4-"+t.id,class:"inline-flex relative items-center cursor-pointer"},[_(e("input",{onChange:r=>n.updateCoordinator(t.id,a.users.data[o.projectData].id,"notify_problems",t.pivot.notify_problems),type:"checkbox","onUpdate:modelValue":r=>t.pivot.notify_problems=r,id:"checked-toggle-4-"+t.id,class:"sr-only peer"},null,40,we),[[b,t.pivot.notify_problems]]),je],8,ve)])]),e("td",Ve,[e("div",Ce,[c(h,{onClick:r=>n.removeFromPr(t.id,a.users.data[o.projectData].id),type:"danger"},{default:d(()=>[Ue]),_:2},1032,["onClick"])])])]))),128))]),c(k,{modelValue:o.innerVisible,"onUpdate:modelValue":s[1]||(s[1]=t=>o.innerVisible=t),width:"60%",title:"Projects","append-to-body":""},{default:d(()=>[e("table",De,[Pe,(i(!0),u(y,null,m(a.projects,t=>(i(),u("tr",{key:t.id,class:"hover:bg-gray-100 dark:hover:bg-mirage-400 focus-within:bg-gray-100"},[e("td",Ie,[e("span",Ne,p(t.name),1)]),e("td",Se,[e("div",Ae,[c(h,{onClick:r=>n.addToPr(t.id,a.users.data[o.projectData].id),type:"success",round:""},{default:d(()=>[Ee]),_:2},1032,["onClick"])])])]))),128))])]),_:1},8,["modelValue"])]),footer:d(()=>[e("div",Fe,[c(h,{onClick:s[2]||(s[2]=t=>o.dialogVisible=!1)},{default:d(()=>[Be]),_:1}),c(h,{type:"primary",onClick:s[3]||(s[3]=t=>o.innerVisible=!0)},{default:d(()=>[Le]),_:1})])]),_:1},8,["modelValue","title"])]}),_:1})}const Ge=F(B,[["render",Te]]);export{Ge as default};
//# sourceMappingURL=Users.62fcd516.js.map
